<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:dx="clr-namespace:DevExpress.Maui.Core;assembly=DevExpress.Maui.Core"
             xmlns:dxcv="clr-namespace:DevExpress.Maui.CollectionView;assembly=DevExpress.Maui.CollectionView"
             xmlns:dxe="clr-namespace:DevExpress.Maui.Editors;assembly=DevExpress.Maui.Editors"
             xmlns:ios="clr-namespace:Microsoft.Maui.Controls.PlatformConfiguration.iOSSpecific;assembly=Microsoft.Maui.Controls"
             xmlns:vm="clr-namespace:AADizErp.ViewModels.HrVM"
             x:DataType="vm:UnconfirmEmployeeListPageViewModel"
             xmlns:models="clr-namespace:AADizErp.Models.Dtos.HrDtos" 
             ios:Page.UseSafeArea="True"
             x:Class="AADizErp.Pages.HRPages.UnconfirmEmployeeListPage"
             Title="Unconfirm Recruitment List">

    <Grid RowDefinitions="Auto,Auto,Auto,*" Padding="15">

        <!-- Add Button -->
        <dx:DXButton 
        Grid.Row="0" 
        Content="+ Add Unconfirm Recruitment" 
        ButtonType="Accent" 
            WidthRequest="260"
            CornerRadius="5"
        Clicked="DXButton_Clicked"
        Margin="0,0,0,10"/>

        <!-- Page Title -->
        <Label Grid.Row="1"
           Text="Recruitment List"
           VerticalOptions="Center" 
           FontSize="18"
           FontAttributes="Bold"
           Margin="0,0,0,10"/>

        <!-- ðŸ” Search Bar -->
        <dx:DXBorder 
        Grid.Row="2"
        CornerRadius="12"
        Margin="10,0,10,10"
        Padding="8">
            <dxe:TextEdit
            x:Name="SearchBox"
            PlaceholderText="Search by name or phoneâ€¦"
            Text="{Binding SearchText, Mode=TwoWay}"
            IsLabelFloating="True"
            AllowAnimation="True"
            ClearIconVisibility="Auto"
            StartIcon="search.png"
            LabelText="Search"
            TextFontSize="16"/>
        </dx:DXBorder>

        <!-- Collection View -->
        <dxcv:DXCollectionView 
        Grid.Row="3"
        x:Name="collectionView"
        IsRefreshing="{Binding IsLoading}"
        IsPullToRefreshEnabled="True"
        PullToRefreshCommand="{Binding RefreshCommand}"
        IsLoadMoreEnabled="True"
        LoadMoreCommand="{Binding LoadMoreCommand}"
        IndicatorColor="{StaticResource Asian}"
        ItemsSource="{Binding UnconfirmList}">

            <dxcv:DXCollectionView.ItemTemplate>
                <DataTemplate x:DataType="{x:Type models:EmployeeDto}">
                    <dx:DXBorder 
                    CornerRadius="5" 
                    BackgroundColor="White" 
                    BorderColor="{StaticResource Asian}"
                    Margin="5,5,5,2"
                    Padding="15,5,15,5">

                        <Grid ColumnDefinitions="Auto,*"
                          RowDefinitions="*,*,*,*,*,*"
                          ColumnSpacing="5"
                          RowSpacing="5">

                            <Label Grid.Column="0" Grid.Row="0" Text="REF #:" FontAttributes="Bold"/>
                            <Label Grid.Column="1" Grid.Row="0" Text="{Binding ReferenceNumber}" />

                            <Label Grid.Column="0" Grid.Row="1" Text="Name:" FontAttributes="Bold"/>
                            <Label Grid.Column="1" Grid.Row="1" Text="{Binding EmployeeName}" />

                            <Label Grid.Column="0" Grid.Row="2" Text="Gender:" FontAttributes="Bold"/>
                            <Label Grid.Column="1" Grid.Row="2" Text="{Binding Gender}" />

                            <Label Grid.Column="0" Grid.Row="3" Text="Phone:" FontAttributes="Bold"/>
                            <Label Grid.Column="1" Grid.Row="3" Text="{Binding Phone}" TextColor="MediumVioletRed"/>

                            <Label Grid.Column="0" Grid.Row="4" Text="Type:" FontAttributes="Bold"/>
                            <Label Grid.Column="1" Grid.Row="4" Text="{Binding EmployeeType}" />

                            <Label Grid.Column="0" Grid.Row="5" Text="Status:" FontAttributes="Bold"/>
                            <Label Grid.Column="1" Grid.Row="5" Text="{Binding ConfirmationStatus}" FontAttributes="Bold">
                                <Label.Triggers>
                                    <DataTrigger TargetType="Label" Binding="{Binding Status}" Value="Confirmed">
                                        <Setter Property="TextColor" Value="Black" />
                                        <Setter Property="BackgroundColor" Value="#AFE1AF" />
                                    </DataTrigger>
                                    <DataTrigger TargetType="Label" Binding="{Binding Status}" Value="Unconfirmed">
                                        <Setter Property="TextColor" Value="White" />
                                        <Setter Property="BackgroundColor" Value="Red" />
                                    </DataTrigger>
                                </Label.Triggers>
                            </Label>

                        </Grid>

                    </dx:DXBorder>
                </DataTemplate>
            </dxcv:DXCollectionView.ItemTemplate>

        </dxcv:DXCollectionView>
    </Grid>

</ContentPage>