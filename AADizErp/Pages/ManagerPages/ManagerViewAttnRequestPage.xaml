<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:dx="clr-namespace:DevExpress.Maui.Core;assembly=DevExpress.Maui.Core"
             xmlns:dxcv="clr-namespace:DevExpress.Maui.CollectionView;assembly=DevExpress.Maui.CollectionView"
             xmlns:ios="clr-namespace:Microsoft.Maui.Controls.PlatformConfiguration.iOSSpecific;assembly=Microsoft.Maui.Controls"
             ios:Page.UseSafeArea="True"
             x:Class="AADizErp.Pages.ManagerPages.ManagerViewAttnRequestPage"
             xmlns:vm="clr-namespace:AADizErp.ViewModels.ManagerPagesVM"
             x:DataType="vm:ManagerAttendanceListViewModel"
             xmlns:models="clr-namespace:AADizErp.Models.Dtos"
             Title="Attendance Request List"
             BackgroundColor="{StaticResource AppBgColor}">

    <Grid Padding="10">
        <dxcv:DXCollectionView 
                IsRefreshing="{Binding IsLoading, Mode=TwoWay}"
                ItemsSource="{Binding Attendances}"
                IsLoadMoreEnabled="True" 
                LoadMoreCommand="{Binding LoadMoreRemoteAttendanceDataCommand}"
                IndicatorColor="{StaticResource Asian}">

            <dxcv:DXCollectionView.ItemTemplate>
                <DataTemplate  x:DataType="{x:Type models:RemoteAttendanceDto}">
                    <dx:DXBorder BackgroundColor="White" CornerRadius="5" BorderColor="{StaticResource Asian}" Margin="10" >
                        <dx:DXBorder.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding Source={RelativeSource AncestorType={x:Type vm:ManagerAttendanceListViewModel}}, Path=ViewAttendanceDetailsCommand }" CommandParameter="{Binding .}"/>
                        </dx:DXBorder.GestureRecognizers>
                        <Grid Grid.Row="0" ColumnDefinitions="Auto,*" RowDefinitions="*,*,*,*" ColumnSpacing="5" RowSpacing="5" Padding="10" >
                            <Label Grid.Column="0" Grid.Row="0" Text="Name:" TextColor="Black" FontAttributes="Bold"/>
                            <Label Grid.Column="1" Grid.Row="0" Text="{Binding FullName}" TextColor="Black"/>
                            <Grid Grid.ColumnSpan="2" Grid.Row="1" RowDefinitions="Auto,*">
                                <Label Grid.Row="0" BackgroundColor="#f2f2f2" Text="Remote Attendance Reason" TextColor="Black" FontAttributes="Bold"/>
                                <Label Grid.Row="1"  Text="{Binding Reason}" TextColor="MediumVioletRed"/>
                            </Grid>

                            <Label Grid.Column="0" Grid.Row="2" Text="Date:" TextColor="Black" FontAttributes="Bold"/>
                            <Label Grid.Column="1" Grid.Row="2" Text="{Binding Created}" TextColor="Black"/>
                            <Label Grid.Column="0" Grid.Row="3" Text="Status:" TextColor="Black" FontAttributes="Bold"/>
                            <Label Grid.Column="1" Grid.Row="3" Text="{Binding Status}" FontAttributes="Bold" HorizontalTextAlignment="Center">
                                <Label.Triggers>
                                    <DataTrigger TargetType="Label" Binding="{Binding Status}" Value="Approved">
                                        <Setter Property="TextColor" Value="Black" />
                                        <Setter Property="BackgroundColor" Value="#AFE1AF" />
                                    </DataTrigger>
                                    <DataTrigger TargetType="Label" Binding="{Binding Status}" Value="Pending">
                                        <Setter Property="TextColor" Value="Black" />
                                        <Setter Property="BackgroundColor" Value="#FFCA8A" />
                                    </DataTrigger>
                                </Label.Triggers>
                            </Label>
                        </Grid>
                    </dx:DXBorder>

                </DataTemplate>
            </dxcv:DXCollectionView.ItemTemplate>
        </dxcv:DXCollectionView>

    </Grid>
</ContentPage>